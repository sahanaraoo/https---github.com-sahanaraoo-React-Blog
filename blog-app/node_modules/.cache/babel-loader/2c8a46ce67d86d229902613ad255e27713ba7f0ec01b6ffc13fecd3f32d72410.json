{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Header from'../../components/Home/Header';import Searchbar from'../../components/Home/Searchbar';// import BlogList from '../../components/Home/BlogList';\nimport EmptyList from'../../components/common/EmptyList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BlogList=_ref=>{let{blogs}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"blogList-wrap\",children:blogs.map(blog=>/*#__PURE__*/_jsxs(\"div\",{className:\"blog-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:blog.cover,alt:blog.title}),/*#__PURE__*/_jsx(\"h3\",{children:blog.title}),/*#__PURE__*/_jsx(\"p\",{children:blog.description}),/*#__PURE__*/_jsx(\"p\",{children:\"Author: \".concat(blog.authorName)}),/*#__PURE__*/_jsx(\"p\",{children:\"Category: \".concat(blog.category)}),/*#__PURE__*/_jsx(\"p\",{children:\"Created At: \".concat(blog.createdAt)}),/*#__PURE__*/_jsx(\"img\",{src:blog.authorAvatar,alt:\"Avatar of \".concat(blog.authorName)})]},blog.id))});};const Home=()=>{const[blogs,setBlogs]=useState([]);const[searchKey,setSearchKey]=useState('');const spaceId='lecsor65z6h5';const accessToken='BfTZj7xc714fKGvPfg7qnA1ZhQh3up_qyWNjQn8Jj8M';const fetchData=async()=>{try{const response=await axios.get(\"https://cdn.contentful.com/spaces/\".concat(spaceId,\"/entries?access_token=\").concat(accessToken,\"&content_type=first\"));// Check if the 'items' array exists in the response\nconst fetchedBlogs=response.data.items?response.data.items.map(item=>{var _item$fields$cover,_item$fields$cover$fi,_item$fields$cover$fi2;return{id:item.sys.id,title:item.fields.title,category:item.fields.category,subCategory:item.fields.subCategory,description:item.fields.description,authorName:item.fields.authorName,authorAvatar:item.fields.authorAvatar,createdAt:item.fields.createdAt,cover:((_item$fields$cover=item.fields.cover)===null||_item$fields$cover===void 0?void 0:(_item$fields$cover$fi=_item$fields$cover.fields)===null||_item$fields$cover$fi===void 0?void 0:(_item$fields$cover$fi2=_item$fields$cover$fi.file)===null||_item$fields$cover$fi2===void 0?void 0:_item$fields$cover$fi2.url)||''// Check if 'cover' and 'file' exist\n};}):[];setBlogs(fetchedBlogs);}catch(error){console.error('Error fetching data from Contentful:',error);}};useEffect(()=>{fetchData();},[]);// Empty dependency array means this effect runs once when the component mounts\nconst handleSearchSubmit=event=>{event.preventDefault();handleSearchResults();};const handleSearchResults=()=>{// Implement your search logic based on the fetched blogs\n// You can use the 'blogs' state for filtering\nconst filteredBlogs=blogs.filter(blog=>blog.category.toLowerCase().includes(searchKey.toLowerCase().trim()));setBlogs(filteredBlogs);};const handleClearSearch=()=>{// Reset to the original fetched blogs\nfetchData();setSearchKey('');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Searchbar,{value:searchKey,clearSearch:handleClearSearch,formSubmit:handleSearchSubmit,handleSearchKey:e=>setSearchKey(e.target.value)}),!blogs.length?/*#__PURE__*/_jsx(EmptyList,{}):/*#__PURE__*/_jsx(BlogList,{blogs:blogs})]});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","axios","Header","Searchbar","EmptyList","jsx","_jsx","jsxs","_jsxs","BlogList","_ref","blogs","className","children","map","blog","src","cover","alt","title","description","concat","authorName","category","createdAt","authorAvatar","id","Home","setBlogs","searchKey","setSearchKey","spaceId","accessToken","fetchData","response","get","fetchedBlogs","data","items","item","_item$fields$cover","_item$fields$cover$fi","_item$fields$cover$fi2","sys","fields","subCategory","file","url","error","console","handleSearchSubmit","event","preventDefault","handleSearchResults","filteredBlogs","filter","toLowerCase","includes","trim","handleClearSearch","value","clearSearch","formSubmit","handleSearchKey","e","target","length"],"sources":["C:/Users/sahan/OneDrive/Desktop/blog-app/blog-app/src/pages/Home/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Header from '../../components/Home/Header';\nimport Searchbar from '../../components/Home/Searchbar';\n// import BlogList from '../../components/Home/BlogList';\nimport EmptyList from '../../components/common/EmptyList';\n\n\nconst BlogList = ({ blogs }) => {\n  return (\n    <div className=\"blogList-wrap\">\n      {blogs.map((blog) => (\n        <div key={blog.id} className=\"blog-item\">\n          <img src={blog.cover} alt={blog.title} />\n          <h3>{blog.title}</h3>\n          <p>{blog.description}</p>\n          <p>{`Author: ${blog.authorName}`}</p>\n          <p>{`Category: ${blog.category}`}</p>\n          <p>{`Created At: ${blog.createdAt}`}</p>\n          <img src={blog.authorAvatar} alt={`Avatar of ${blog.authorName}`} />\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst Home = () => {\n  const [blogs, setBlogs] = useState([]);\n  const [searchKey, setSearchKey] = useState('');\n\n  const spaceId = 'lecsor65z6h5'; \n  const accessToken = 'BfTZj7xc714fKGvPfg7qnA1ZhQh3up_qyWNjQn8Jj8M'; \n\n  const fetchData = async () => {\n    try {\n      const response = await axios.get(\n        `https://cdn.contentful.com/spaces/${spaceId}/entries?access_token=${accessToken}&content_type=first`\n      );\n  \n      // Check if the 'items' array exists in the response\n      const fetchedBlogs = response.data.items\n        ? response.data.items.map((item) => ({\n            id: item.sys.id,\n            title: item.fields.title,\n            category: item.fields.category,\n            subCategory: item.fields.subCategory,\n            description: item.fields.description,\n            authorName: item.fields.authorName,\n            authorAvatar: item.fields.authorAvatar,\n            createdAt: item.fields.createdAt,\n            cover: item.fields.cover?.fields?.file?.url || '', // Check if 'cover' and 'file' exist\n          }))\n        : [];\n  \n      setBlogs(fetchedBlogs);\n    } catch (error) {\n      console.error('Error fetching data from Contentful:', error);\n    }\n  };\n  \n  \n\n  useEffect(() => {\n    fetchData();\n  }, []); // Empty dependency array means this effect runs once when the component mounts\n\n  const handleSearchSubmit = (event) => {\n    event.preventDefault();\n    handleSearchResults();\n  };\n\n  const handleSearchResults = () => {\n    // Implement your search logic based on the fetched blogs\n    // You can use the 'blogs' state for filtering\n    const filteredBlogs = blogs.filter((blog) =>\n      blog.category.toLowerCase().includes(searchKey.toLowerCase().trim())\n    );\n    setBlogs(filteredBlogs);\n  };\n\n  const handleClearSearch = () => {\n    // Reset to the original fetched blogs\n    fetchData();\n    setSearchKey('');\n  };\n\n  return (\n    <div>\n      <Header />\n      <Searchbar\n        value={searchKey}\n        clearSearch={handleClearSearch}\n        formSubmit={handleSearchSubmit}\n        handleSearchKey={(e) => setSearchKey(e.target.value)}\n      />\n      {!blogs.length ? <EmptyList /> : <BlogList blogs={blogs} />}\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}